<!DOCTYPE html>
<html lang="en">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Contributing ESLint Support to nvim-lspconfig | Thoughts</title>
    <link rel="stylesheet" href="/css/style.css">
    
</head>
<body>
    <header>
        <h1><a href="http://localhost:1313/">Thoughts</a></h1>
    </header>
    <main>
        
<article>
    <h1>Contributing ESLint Support to nvim-lspconfig</h1>
    <time>27 Apr 2025</time>
    <p>My recent contribution to the neovim/nvim-lspconfig repository adds comprehensive ESLint language server support using the modern <code>vim.lsp.config</code> API. This pull request addresses issue #3705 and provides a seamless integration for JavaScript and TypeScript developers using Neovim.</p>
<blockquote>
<p>Check out the <a href="https://github.com/neovim/nvim-lspconfig/pull/3731">pull request #3731</a> on GitHub</p></blockquote>
<h2 id="the-context-modernizing-nvim-lspconfig">The Context: Modernizing nvim-lspconfig</h2>
<p>nvim-lspconfig is the official Neovim plugin that provides quickstart configurations for Language Server Protocol (LSP) clients. With the release of Neovim 0.11+, the project has been transitioning from the legacy <code>require'lspconfig'.setup{}</code> pattern to the new <code>vim.lsp.config</code> API. This modernization effort requires updating all existing configurations to use the new pattern.</p>
<p>The ESLint configuration was one of the remaining configurations that needed to be ported to the new API. Issue <a href="https://github.com/neovim/nvim-lspconfig/issues/3705">#3705</a> specifically tracked this migration task, and my contribution completes this transition for the ESLint language server.</p>
<h2 id="the-implementation-building-a-robust-eslint-configuration">The Implementation: Building a Robust ESLint Configuration</h2>
<p>The new ESLint configuration in <code>lsp/eslint.lua</code> provides a complete implementation that mirrors the functionality of the original configuration while leveraging the modern <code>vim.lsp.config</code> API.</p>
<h3 id="key-features-implemented">Key Features Implemented</h3>
<ol>
<li><strong>Modern API Compliance</strong>: Uses <code>vim.lsp.config</code> instead of the deprecated <code>lspconfig</code> framework</li>
<li><strong>Comprehensive ESLint Support</strong>: Includes all the essential ESLint LSP capabilities</li>
<li><strong>Root Directory Detection</strong>: Properly detects ESLint configuration files for workspace setup</li>
<li><strong>Fix All Support</strong>: Implements the <code>eslint/fixAll</code> code action for bulk fixes</li>
<li><strong>Buffer-specific Operations</strong>: Ensures operations target the correct buffer context</li>
</ol>
<h3 id="technical-implementation-details">Technical Implementation Details</h3>
<p>The configuration follows the established patterns in nvim-lspconfig while adding several improvements:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-lua" data-lang="lua"><span style="display:flex;"><span><span style="color:#66d9ef">return</span> {
</span></span><span style="display:flex;"><span>	name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;eslint&#34;</span>,
</span></span><span style="display:flex;"><span>	cmd <span style="color:#f92672">=</span> { <span style="color:#e6db74">&#34;vscode-eslint-language-server&#34;</span>, <span style="color:#e6db74">&#34;--stdio&#34;</span> },
</span></span><span style="display:flex;"><span>	filetypes <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#e6db74">&#34;javascript&#34;</span>,
</span></span><span style="display:flex;"><span>		<span style="color:#e6db74">&#34;javascriptreact&#34;</span>,
</span></span><span style="display:flex;"><span>		<span style="color:#e6db74">&#34;javascript.jsx&#34;</span>,
</span></span><span style="display:flex;"><span>		<span style="color:#e6db74">&#34;typescript&#34;</span>,
</span></span><span style="display:flex;"><span>		<span style="color:#e6db74">&#34;typescriptreact&#34;</span>,
</span></span><span style="display:flex;"><span>		<span style="color:#e6db74">&#34;typescript.tsx&#34;</span>,
</span></span><span style="display:flex;"><span>		<span style="color:#e6db74">&#34;vue&#34;</span>,
</span></span><span style="display:flex;"><span>		<span style="color:#e6db74">&#34;svelte&#34;</span>,
</span></span><span style="display:flex;"><span>		<span style="color:#e6db74">&#34;astro&#34;</span>,
</span></span><span style="display:flex;"><span>	},
</span></span><span style="display:flex;"><span>	root_dir <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span>(fname)
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> util.root_pattern(
</span></span><span style="display:flex;"><span>			<span style="color:#e6db74">&#34;.eslintrc&#34;</span>,
</span></span><span style="display:flex;"><span>			<span style="color:#e6db74">&#34;.eslintrc.js&#34;</span>,
</span></span><span style="display:flex;"><span>			<span style="color:#e6db74">&#34;.eslintrc.cjs&#34;</span>,
</span></span><span style="display:flex;"><span>			<span style="color:#e6db74">&#34;.eslintrc.yaml&#34;</span>,
</span></span><span style="display:flex;"><span>			<span style="color:#e6db74">&#34;.eslintrc.yml&#34;</span>,
</span></span><span style="display:flex;"><span>			<span style="color:#e6db74">&#34;.eslintrc.json&#34;</span>,
</span></span><span style="display:flex;"><span>			<span style="color:#e6db74">&#34;eslint.config.js&#34;</span>,
</span></span><span style="display:flex;"><span>			<span style="color:#e6db74">&#34;package.json&#34;</span>
</span></span><span style="display:flex;"><span>		)(fname) <span style="color:#f92672">or</span> util.find_git_ancestor(fname)
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">end</span>,
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">-- ... additional configuration</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="the-challenge-proper-buffer-context-in-fix-operations">The Challenge: Proper Buffer Context in Fix Operations</h3>
<p>One of the key challenges was ensuring that the <code>eslint/fixAll</code> code action operated on the correct buffer. The original implementation had an issue where it would sometimes target the wrong buffer context. My contribution includes a fix that properly handles buffer identification:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-lua" data-lang="lua"><span style="display:flex;"><span>fix_all <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span>()
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">local</span> bufnr <span style="color:#f92672">=</span> vim.api.nvim_get_current_buf()
</span></span><span style="display:flex;"><span>	vim.lsp.buf_request(bufnr, <span style="color:#e6db74">&#34;workspace/executeCommand&#34;</span>, {
</span></span><span style="display:flex;"><span>		command <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;eslint/fixAll&#34;</span>,
</span></span><span style="display:flex;"><span>		arguments <span style="color:#f92672">=</span> { vim.uri_from_bufnr(bufnr) },
</span></span><span style="display:flex;"><span>	})
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">end</span>
</span></span></code></pre></div><p>This ensures that the fix operation always targets the current buffer, preventing cross-buffer contamination.</p>
<h2 id="impact-and-benefits">Impact and Benefits</h2>
<p>This contribution provides several benefits to the Neovim community:</p>
<ol>
<li><strong>Completion of Migration</strong>: Helps complete the transition to the modern <code>vim.lsp.config</code> API</li>
<li><strong>Improved Developer Experience</strong>: JavaScript/TypeScript developers get seamless ESLint integration</li>
<li><strong>Community Collaboration</strong>: Demonstrates the open-source collaboration process</li>
<li><strong>Code Quality</strong>: Sets a standard for future configuration contributions</li>
</ol>
<h2 id="the-open-source-contribution-experience">The Open Source Contribution Experience</h2>
<p>Contributing to a major project like nvim-lspconfig was a valuable experience that highlighted several aspects of open-source development:</p>
<ol>
<li><strong>Importance of Following Conventions</strong>: Adhering to project style guides and patterns</li>
<li><strong>Thorough Testing</strong>: Ensuring compatibility across different environments</li>
<li><strong>Clear Communication</strong>: Providing context and rationale for implementation choices</li>
<li><strong>Responsive Collaboration</strong>: Addressing review feedback promptly and effectively</li>
</ol>
<h2 id="getting-started-with-nvim-lspconfig-contributions">Getting Started with nvim-lspconfig Contributions</h2>
<p>For developers interested in contributing to nvim-lspconfig, the process is well-documented:</p>
<ol>
<li><strong>Read CONTRIBUTING.md</strong>: Understand the project guidelines and expectations</li>
<li><strong>Choose an Issue</strong>: Look for labeled issues or identify missing configurations</li>
<li><strong>Follow Patterns</strong>: Study existing configurations to understand the expected structure</li>
<li><strong>Test Thoroughly</strong>: Verify your configuration works across different setups</li>
<li><strong>Submit PR</strong>: Create a clear pull request with detailed description</li>
</ol>
<h2 id="conclusion">Conclusion</h2>
<p>My contribution to nvim-lspconfig&rsquo;s ESLint support demonstrates how individual developers can make meaningful impacts on widely-used open source projects. The successful merge of this pull request not only improves the development experience for JavaScript and TypeScript users but also contributes to the ongoing modernization of the nvim-lspconfig ecosystem.</p>
<p>The collaborative review process and positive community feedback underscore the value of open source contributions and the importance of maintaining high-quality, well-documented code in critical developer tools.</p>
<p>For those interested in exploring the implementation, the complete code is available in the <a href="https://github.com/neovim/nvim-lspconfig/blob/master/lsp/eslint.lua">nvim-lspconfig repository</a> and serves as a reference for future configuration contributions.</p>

</article>

    </main>
    <footer>
        <p>&copy; 2025 Thoughts</p>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({ startOnLoad: true });
        });
    </script>
</body>
</html>